{"version":3,"sources":["FrontSide.tsx"],"names":["FrontSide","model","cardType","focusedField","overrides","translations","LibraryContext","numberLayout","setNumberLayout","nameLayout","setNameLayout","expirationLayout","setExpirationLayout","width","windowWidth","positionAnim","Animated","ValueXY","current","sizeAnim","animate","layout","spring","toValue","x","y","useNativeDriver","start","height","styles","header","cardNumber","numberText","fontSize","cardPreview","nativeEvent","labelContainer","labelText","cardHolderName","toUpperCase","expiration","bottomText","nameText","color","holderName","cardHolderPreview","nameSurname","expirationText","expirationPreview","mmYY","outline","left","top","StyleSheet","create","flex","alignItems","margin","position","letterSpacing","lineHeight","bottom","alignSelf","maxWidth","right","flexDirection","justifyContent","marginBottom","backgroundColor","borderWidth","borderColor","borderRadius"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useEffect, useContext } from 'react'\nimport {\n  Animated,\n  LayoutRectangle,\n  StyleSheet,\n  useWindowDimensions,\n  View,\n} from 'react-native'\nimport CardIcon from '../CardIcon'\nimport PlaceholderText from './PlaceholderText'\nimport Text from '../Text'\nimport LibraryContext from '../../LibraryContext'\nimport { CardFields, FormModel } from '../../types'\n\ntype Props = {\n  model: FormModel\n  cardType?: string\n  focusedField: CardFields | null\n}\n\nconst FrontSide: React.FC<Props> = ({ model, cardType, focusedField }) => {\n  const { overrides, translations } = useContext(LibraryContext)\n  const [numberLayout, setNumberLayout] = useState<LayoutRectangle | null>(null)\n  const [nameLayout, setNameLayout] = useState<LayoutRectangle | null>(null)\n  const [\n    expirationLayout,\n    setExpirationLayout,\n  ] = useState<LayoutRectangle | null>(null)\n  const { width: windowWidth } = useWindowDimensions()\n\n  const positionAnim = useRef(new Animated.ValueXY()).current\n  const sizeAnim = useRef(new Animated.ValueXY()).current\n\n  useEffect(() => {\n    function animate(layout: LayoutRectangle) {\n      Animated.spring(positionAnim, {\n        toValue: {\n          x: layout.x - 8,\n          y: layout.y,\n        },\n        useNativeDriver: false,\n      }).start()\n      Animated.spring(sizeAnim, {\n        toValue: {\n          x: layout.width + 16,\n          y: layout.height + 4,\n        },\n        useNativeDriver: false,\n      }).start()\n    }\n\n    if (focusedField === null) {\n      return\n    }\n\n    const layout = [numberLayout, nameLayout, expirationLayout][focusedField]\n    if (layout) {\n      animate(layout)\n    }\n  }, [\n    focusedField,\n    numberLayout,\n    nameLayout,\n    expirationLayout,\n    sizeAnim,\n    positionAnim,\n  ])\n\n  return (\n    <>\n      <View style={styles.header}>\n        <CardIcon cardNumber={model.cardNumber} />\n      </View>\n      <PlaceholderText\n        style={[\n          styles.numberText,\n          {\n            fontSize: windowWidth < 390 ? 20 : 22,\n          },\n          overrides.cardPreview,\n        ]}\n        value={model.cardNumber}\n        placeholder={\n          cardType === 'american-express'\n            ? 'XXXX XXXXXX XXXXX'\n            : 'XXXX XXXX XXXX XXXX'\n        }\n        onLayout={({ nativeEvent }) => setNumberLayout(nativeEvent.layout)}\n      />\n      <View style={styles.labelContainer}>\n        <Text style={[styles.labelText, overrides.labelText]}>\n          {translations.cardHolderName.toUpperCase()}\n        </Text>\n        <Text style={[styles.labelText, overrides.labelText]}>\n          {translations.expiration}\n        </Text>\n      </View>\n      <Text\n        style={[\n          styles.bottomText,\n          styles.nameText,\n          {\n            color: model.holderName ? 'white' : 'gray',\n          },\n          overrides.cardHolderPreview,\n        ]}\n        numberOfLines={1}\n        onLayout={({ nativeEvent }) => setNameLayout(nativeEvent.layout)}\n      >\n        {model.holderName.toUpperCase() || translations.nameSurname}\n      </Text>\n      <PlaceholderText\n        style={[\n          styles.bottomText,\n          styles.expirationText,\n          overrides.expirationPreview,\n        ]}\n        value={model.expiration}\n        placeholder={translations.mmYY}\n        onLayout={({ nativeEvent }) => setExpirationLayout(nativeEvent.layout)}\n      />\n      <Animated.View\n        style={[\n          styles.outline,\n          overrides.outline,\n          {\n            left: positionAnim.x,\n            top: positionAnim.y,\n            width: sizeAnim.x,\n            height: sizeAnim.y,\n          },\n        ]}\n      />\n    </>\n  )\n}\n\nconst styles = StyleSheet.create({\n  header: {\n    flex: 1,\n    alignItems: 'flex-end',\n    margin: 8,\n  },\n  numberText: {\n    position: 'absolute',\n    top: '40%',\n    left: 24,\n    color: 'white',\n    letterSpacing: 2,\n    lineHeight: 36,\n  },\n  bottomText: {\n    position: 'absolute',\n    bottom: 24,\n    fontSize: 12,\n    letterSpacing: 2,\n    color: 'white',\n    alignSelf: 'flex-start',\n  },\n  nameText: {\n    left: 24,\n    maxWidth: '70%',\n  },\n  expirationText: {\n    right: 24,\n  },\n  labelContainer: {\n    position: 'absolute',\n    left: 24,\n    right: 24,\n    bottom: 24,\n    flex: 1,\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 16,\n  },\n  labelText: {\n    marginBottom: 4,\n    fontSize: 12,\n    color: 'white',\n    letterSpacing: 1,\n  },\n  outline: {\n    position: 'absolute',\n    height: 38,\n    backgroundColor: 'transparent',\n    borderWidth: 1,\n    borderColor: '#f4d01a',\n    borderRadius: 14,\n  },\n})\n\nexport default FrontSide\n"]}