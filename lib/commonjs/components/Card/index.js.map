{"version":3,"sources":["index.tsx"],"names":["usePrevious","value","ref","current","background","require","Card","model","cardType","focusedField","backgroundImage","LibraryContext","previousFocused","cardRef","switchToBack","CardFields","CVV","switchToFront","flip","styles","container","StyleSheet","create","width","height","paddingVertical","borderRadius","position"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;;;;;;;AAQA,SAASA,WAAT,CAAqBC,KAArB,EAAiC;AAC/B,QAAMC,GAAG,GAAG,oBAAZ;AACA,wBAAU,MAAM;AACdA,IAAAA,GAAG,CAACC,OAAJ,GAAcF,KAAd;AACD,GAFD;AAGA,SAAOC,GAAG,CAACC,OAAX;AACD;;AAED,MAAMC,UAAU,GAAGC,OAAO,CAAC,gCAAD,CAA1B;;AAEA,MAAMC,IAAqB,GAAG,CAAC;AAAEC,EAAAA,KAAF;AAASC,EAAAA,QAAT;AAAmBC,EAAAA;AAAnB,CAAD,KAAuC;AACnE,QAAM;AAAEC,IAAAA;AAAF,MAAsB,uBAAWC,uBAAX,CAA5B;AACA,QAAMC,eAAe,GAAGZ,WAAW,CAACS,YAAD,CAAnC;AACA,QAAMI,OAAO,GAAG,oBAAhB;AAEA,wBAAU,MAAM;AACd,UAAMC,YAAY,GAChBL,YAAY,KAAKM,kBAAWC,GAA5B,IAAmCJ,eAAe,KAAKG,kBAAWC,GADpE;AAEA,UAAMC,aAAa,GACjBR,YAAY,KAAKM,kBAAWC,GAA5B,IAAmCJ,eAAe,KAAKG,kBAAWC,GADpE;;AAGA,QAAIF,YAAY,IAAIG,aAApB,EAAmC;AAAA;;AACjC,0BAAAJ,OAAO,CAACV,OAAR,sEAAiBe,IAAjB;AACD;AACF,GATD,EASG,CAACT,YAAD,EAAeG,eAAf,CATH;AAWA;AACA,sBACE,yEAEE,6BAAC,4BAAD;AAAU,IAAA,KAAK,EAAEO,MAAM,CAACC,SAAxB;AAAmC,IAAA,GAAG,EAAEP;AAAxC,kBACE,4DACGH,eAAe,iBACd,6BAAC,kBAAD;AAAO,IAAA,KAAK,EAAES,MAAM,CAACf,UAArB;AAAiC,IAAA,MAAM,EAAEA;AAAzC,IAFJ,eAIE,6BAAC,kBAAD;AACE,IAAA,KAAK,EAAEG,KADT;AAEE,IAAA,QAAQ,EAAEC,QAFZ;AAGE,IAAA,YAAY,EAAEC;AAHhB,IAJF,CADF,eAWE,4DACGC,eAAe,iBACd,6BAAC,kBAAD;AAAO,IAAA,KAAK,EAAES,MAAM,CAACf,UAArB;AAAiC,IAAA,MAAM,EAAEA;AAAzC,IAFJ,eAIE,6BAAC,iBAAD;AAAU,IAAA,KAAK,EAAEG,KAAjB;AAAwB,IAAA,QAAQ,EAAEC;AAAlC,IAJF,CAXF,CAFF,CADF;AAuBD,CAxCD;;AA0CA,MAAMW,MAAM,GAAGE,wBAAWC,MAAX,CAAkB;AAC/BF,EAAAA,SAAS,EAAE;AACTG,IAAAA,KAAK,EAAE,MADE;AAETC,IAAAA,MAAM,EAAE,GAFC;AAGTC,IAAAA,eAAe,EAAE,EAHR;AAITC,IAAAA,YAAY,EAAE;AAJL,GADoB;AAO/BtB,EAAAA,UAAU,EAAE;AACVuB,IAAAA,QAAQ,EAAE,UADA;AAEVJ,IAAAA,KAAK,EAAE,MAFG;AAGVC,IAAAA,MAAM,EAAE,MAHE;AAIVE,IAAAA,YAAY,EAAE;AAJJ;AAPmB,CAAlB,CAAf;;eAeepB,I","sourcesContent":["import React, { useContext, useEffect, useRef } from 'react'\nimport { Image, StyleSheet } from 'react-native'\nimport FlipCard from 'react-native-card-flip'\nimport { CardFields, FormModel } from '../../types'\nimport LibraryContext from '../../LibraryContext'\n\nimport BackSide from './BackSide'\nimport FrontSide from './FrontSide'\n\ntype Props = {\n  focusedField: CardFields | null\n  cardType?: string\n  model: FormModel\n}\n\nfunction usePrevious(value: any) {\n  const ref = useRef()\n  useEffect(() => {\n    ref.current = value\n  })\n  return ref.current\n}\n\nconst background = require('../../assets/background.png.js')\n\nconst Card: React.FC<Props> = ({ model, cardType, focusedField }) => {\n  const { backgroundImage } = useContext(LibraryContext)\n  const previousFocused = usePrevious(focusedField)\n  const cardRef = useRef<FlipCard>()\n\n  useEffect(() => {\n    const switchToBack =\n      focusedField === CardFields.CVV && previousFocused !== CardFields.CVV\n    const switchToFront =\n      focusedField !== CardFields.CVV && previousFocused === CardFields.CVV\n\n    if (switchToBack || switchToFront) {\n      cardRef.current?.flip()\n    }\n  }, [focusedField, previousFocused])\n\n  debugger;\n  return (\n    <>\n      {/* @ts-ignore */}\n      <FlipCard style={styles.container} ref={cardRef}>\n        <>\n          {backgroundImage || (\n            <Image style={styles.background} source={background} />\n          )}\n          <FrontSide\n            model={model}\n            cardType={cardType}\n            focusedField={focusedField}\n          />\n        </>\n        <>\n          {backgroundImage || (\n            <Image style={styles.background} source={background} />\n          )}\n          <BackSide model={model} cardType={cardType} />\n        </>\n      </FlipCard>\n    </>\n  )\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    width: '100%',\n    height: 200,\n    paddingVertical: 24,\n    borderRadius: 12,\n  },\n  background: {\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    borderRadius: 12,\n  },\n})\n\nexport default Card\n"]}