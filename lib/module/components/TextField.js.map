{"version":3,"sources":["TextField.tsx"],"names":["React","useContext","useEffect","useRef","useState","TextInput","StyleSheet","View","Animated","Easing","TouchableWithoutFeedback","Text","LibraryContext","TextField","forwardRef","props","ref","label","errorText","value","endEnhancer","style","onBlur","onFocus","restOfProps","inputColors","fonts","overrides","errored","errorColor","focused","focusedColor","regular","regularColor","isFocused","setIsFocused","focusAnim","Value","current","timing","toValue","duration","easing","bezier","useNativeDriver","start","color","styles","input","fontFamily","borderColor","event","focus","labelContainer","transform","scale","interpolate","inputRange","outputRange","translateY","translateX","inputLabel","enhancerContainer","error","create","padding","borderWidth","borderRadius","fontSize","position","paddingHorizontal","backgroundColor","top","right","marginTop","marginLeft"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useRef, useState } from 'react'\nimport {\n  TextInput,\n  StyleSheet,\n  View,\n  Animated,\n  Easing,\n  TouchableWithoutFeedback,\n} from 'react-native'\nimport Text from './Text'\nimport LibraryContext from '../LibraryContext'\n\ntype Props = React.ComponentProps<typeof TextInput> & {\n  label: string\n  errorText?: string | null\n  endEnhancer?: React.ReactNode\n}\n\nconst TextField = React.forwardRef<TextInput, Props>((props, ref) => {\n  const {\n    label,\n    errorText,\n    value,\n    endEnhancer,\n    style,\n    onBlur,\n    onFocus,\n    ...restOfProps\n  } = props\n  const { inputColors = {}, fonts, overrides } = useContext(LibraryContext)\n  const {\n    errored: errorColor = '#B00020',\n    focused: focusedColor = '#080F9C',\n    regular: regularColor = '#B9C4CA',\n  } = inputColors\n\n  const [isFocused, setIsFocused] = useState(false)\n\n  const focusAnim = useRef(new Animated.Value(0)).current\n\n  useEffect(() => {\n    Animated.timing(focusAnim, {\n      toValue: isFocused || !!value ? 1 : 0,\n      duration: 150,\n      easing: Easing.bezier(0.4, 0, 0.2, 1),\n      useNativeDriver: true,\n    }).start()\n  }, [focusAnim, isFocused, value])\n\n  let color = isFocused ? focusedColor : regularColor\n  if (errorText) {\n    color = errorColor\n  }\n\n  return (\n    <View style={style}>\n      <TextInput\n        style={[\n          styles.input,\n          {\n            fontFamily: fonts.regular,\n          },\n          overrides.input,\n          {\n            borderColor: color,\n          },\n        ]}\n        ref={ref}\n        {...restOfProps}\n        value={value}\n        onBlur={(event) => {\n          setIsFocused(false)\n          onBlur?.(event)\n        }}\n        onFocus={(event) => {\n          setIsFocused(true)\n          onFocus?.(event)\n        }}\n      />\n      <TouchableWithoutFeedback\n        onPress={() => {\n          // @ts-ignore\n          ref?.current?.focus()\n        }}\n      >\n        <Animated.View\n          style={[\n            styles.labelContainer,\n            {\n              transform: [\n                {\n                  scale: focusAnim.interpolate({\n                    inputRange: [0, 1],\n                    outputRange: [1, 0.75],\n                  }),\n                },\n                {\n                  translateY: focusAnim.interpolate({\n                    inputRange: [0, 1],\n                    outputRange: [24, -12],\n                  }),\n                },\n                {\n                  translateX: focusAnim.interpolate({\n                    inputRange: [0, 1],\n                    outputRange: [16, 0],\n                  }),\n                },\n              ],\n            },\n            overrides.labelContainer,\n          ]}\n        >\n          <Text\n            style={[\n              styles.label,\n              overrides.inputLabel,\n              {\n                color,\n              },\n            ]}\n            bold\n          >\n            {label}\n            {errorText ? '*' : ''}\n          </Text>\n        </Animated.View>\n      </TouchableWithoutFeedback>\n      {endEnhancer && (\n        <View style={styles.enhancerContainer}>{endEnhancer}</View>\n      )}\n      {!!errorText && (\n        <Text style={[styles.error, overrides.errorText]}>{errorText}</Text>\n      )}\n    </View>\n  )\n})\n\nconst styles = StyleSheet.create({\n  input: {\n    padding: 24,\n    borderWidth: 1,\n    borderRadius: 4,\n    fontSize: 16,\n  },\n  labelContainer: {\n    position: 'absolute',\n    paddingHorizontal: 8,\n    backgroundColor: 'white',\n  },\n  label: {\n    fontSize: 14,\n  },\n  enhancerContainer: {\n    position: 'absolute',\n    top: 12,\n    right: 16,\n  },\n  error: {\n    marginTop: 4,\n    marginLeft: 12,\n    fontSize: 12,\n    color: '#B00020',\n  },\n})\n\nexport default TextField\n"]}