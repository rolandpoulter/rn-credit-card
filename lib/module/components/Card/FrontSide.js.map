{"version":3,"sources":["FrontSide.tsx"],"names":["React","useRef","useState","useEffect","useContext","Animated","StyleSheet","useWindowDimensions","View","CardIcon","PlaceholderText","Text","LibraryContext","FrontSide","model","cardType","focusedField","disabled","overrides","translations","numberLayout","setNumberLayout","nameLayout","setNameLayout","expirationLayout","setExpirationLayout","width","windowWidth","positionAnim","ValueXY","current","sizeAnim","animate","layout","spring","toValue","x","y","useNativeDriver","start","height","styles","header","cardNumber","numberText","fontSize","cardPreview","nativeEvent","labelContainer","labelText","cardHolderName","toUpperCase","expiration","bottomText","nameText","color","holderName","cardHolderPreview","nameSurname","expirationText","expirationPreview","mmYY","outline","left","top","create","flex","alignItems","margin","position","letterSpacing","lineHeight","bottom","alignSelf","maxWidth","right","flexDirection","justifyContent","marginBottom","backgroundColor","borderWidth","borderColor","borderRadius"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useEffect, useContext } from 'react'\nimport {\n  Animated,\n  LayoutRectangle,\n  StyleSheet,\n  useWindowDimensions,\n  View,\n} from 'react-native'\nimport CardIcon from '../CardIcon'\nimport PlaceholderText from './PlaceholderText'\nimport Text from '../Text'\nimport LibraryContext from '../../LibraryContext'\nimport { CardFields, FormModel } from '../../types'\n\ntype Props = {\n  model: FormModel\n  cardType?: string\n  focusedField: CardFields | null\n  disabled: boolean | null\n}\n\nconst FrontSide: React.FC<Props> = ({ model, cardType, focusedField, disabled }) => {\n  const { overrides, translations } = useContext(LibraryContext)\n  const [numberLayout, setNumberLayout] = useState<LayoutRectangle | null>(null)\n  const [nameLayout, setNameLayout] = useState<LayoutRectangle | null>(null)\n  const [\n    expirationLayout,\n    setExpirationLayout,\n  ] = useState<LayoutRectangle | null>(null)\n  const { width: windowWidth } = useWindowDimensions()\n\n  const positionAnim = useRef(new Animated.ValueXY()).current\n  const sizeAnim = useRef(new Animated.ValueXY()).current\n\n  useEffect(() => {\n    function animate(layout: LayoutRectangle) {\n      Animated.spring(positionAnim, {\n        toValue: {\n          x: layout.x - 8,\n          y: layout.y,\n        },\n        useNativeDriver: false,\n      }).start()\n      Animated.spring(sizeAnim, {\n        toValue: {\n          x: layout.width + 16,\n          y: layout.height + 4,\n        },\n        useNativeDriver: false,\n      }).start()\n    }\n\n    if (focusedField === null) {\n      return\n    }\n\n    const layout = [numberLayout, nameLayout, expirationLayout][focusedField]\n    if (layout) {\n      animate(layout)\n    }\n  }, [\n    focusedField,\n    numberLayout,\n    nameLayout,\n    expirationLayout,\n    sizeAnim,\n    positionAnim,\n  ])\n\n  return (\n    <>\n      <View style={styles.header}>\n        <CardIcon cardNumber={model.cardNumber} disabled={disabled} />\n      </View>\n      <PlaceholderText\n        style={[\n          styles.numberText,\n          {\n            fontSize: windowWidth < 390 ? 20 : 22,\n          },\n          overrides.cardPreview,\n        ]}\n        value={model.cardNumber}\n        placeholder={\n          cardType === 'american-express'\n            ? 'XXXX XXXXXX XXXXX'\n            : 'XXXX XXXX XXXX XXXX'\n        }\n        onLayout={({ nativeEvent }) => setNumberLayout(nativeEvent.layout)}\n      />\n      <View style={styles.labelContainer}>\n        <Text style={[styles.labelText, overrides.labelText]}>\n          {translations.cardHolderName.toUpperCase()}\n        </Text>\n        <Text style={[styles.labelText, overrides.labelText]}>\n          {translations.expiration}\n        </Text>\n      </View>\n      <Text\n        style={[\n          styles.bottomText,\n          styles.nameText,\n          {\n            color: model.holderName ? 'white' : 'gray',\n          },\n          overrides.cardHolderPreview,\n        ]}\n        numberOfLines={1}\n        onLayout={({ nativeEvent }) => setNameLayout(nativeEvent.layout)}\n      >\n        {model.holderName.toUpperCase() || translations.nameSurname}\n      </Text>\n      <PlaceholderText\n        style={[\n          styles.bottomText,\n          styles.expirationText,\n          overrides.expirationPreview,\n        ]}\n        value={model.expiration}\n        placeholder={translations.mmYY}\n        onLayout={({ nativeEvent }) => setExpirationLayout(nativeEvent.layout)}\n      />\n      <Animated.View\n        style={[\n          styles.outline,\n          overrides.outline,\n          {\n            left: positionAnim.x,\n            top: positionAnim.y,\n            width: sizeAnim.x,\n            height: sizeAnim.y,\n          },\n        ]}\n      />\n    </>\n  )\n}\n\nconst styles = StyleSheet.create({\n  header: {\n    flex: 1,\n    alignItems: 'flex-end',\n    margin: 8,\n  },\n  numberText: {\n    position: 'absolute',\n    top: '40%',\n    left: 24,\n    color: 'white',\n    letterSpacing: 2,\n    lineHeight: 36,\n  },\n  bottomText: {\n    position: 'absolute',\n    bottom: 24,\n    fontSize: 12,\n    letterSpacing: 2,\n    color: 'white',\n    alignSelf: 'flex-start',\n  },\n  nameText: {\n    left: 24,\n    maxWidth: '70%',\n  },\n  expirationText: {\n    right: 24,\n  },\n  labelContainer: {\n    position: 'absolute',\n    left: 24,\n    right: 24,\n    bottom: 24,\n    flex: 1,\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 16,\n  },\n  labelText: {\n    marginBottom: 4,\n    fontSize: 12,\n    color: 'white',\n    letterSpacing: 1,\n  },\n  outline: {\n    position: 'absolute',\n    height: 38,\n    backgroundColor: 'transparent',\n    borderWidth: 1,\n    borderColor: '#f4d01a',\n    borderRadius: 14,\n  },\n})\n\nexport default FrontSide\n"]}