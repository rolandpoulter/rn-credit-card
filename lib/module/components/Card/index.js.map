{"version":3,"sources":["index.tsx"],"names":["React","useContext","useEffect","useRef","Image","StyleSheet","FlipCard","CardFields","LibraryContext","BackSide","FrontSide","usePrevious","value","ref","current","background","require","Card","model","cardType","focusedField","backgroundImage","previousFocused","cardRef","switchToBack","CVV","switchToFront","flip","styles","container","create","width","height","paddingVertical","borderRadius","position"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,MAAvC,QAAqD,OAArD;AACA,SAASC,KAAT,EAAgBC,UAAhB,QAAkC,cAAlC;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,SAASC,UAAT,QAAsC,aAAtC;AACA,OAAOC,cAAP,MAA2B,sBAA3B;AAEA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,SAAP,MAAsB,aAAtB;;AAQA,SAASC,WAAT,CAAqBC,KAArB,EAAiC;AAC/B,QAAMC,GAAG,GAAGV,MAAM,EAAlB;AACAD,EAAAA,SAAS,CAAC,MAAM;AACdW,IAAAA,GAAG,CAACC,OAAJ,GAAcF,KAAd;AACD,GAFQ,CAAT;AAGA,SAAOC,GAAG,CAACC,OAAX;AACD;;AAED,MAAMC,UAAU,GAAGC,OAAO,CAAC,6BAAD,CAA1B;;AAEA,MAAMC,IAAqB,GAAG,CAAC;AAAEC,EAAAA,KAAF;AAASC,EAAAA,QAAT;AAAmBC,EAAAA;AAAnB,CAAD,KAAuC;AACnE,QAAM;AAAEC,IAAAA;AAAF,MAAsBpB,UAAU,CAACO,cAAD,CAAtC;AACA,QAAMc,eAAe,GAAGX,WAAW,CAACS,YAAD,CAAnC;AACA,QAAMG,OAAO,GAAGpB,MAAM,EAAtB;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMsB,YAAY,GAChBJ,YAAY,KAAKb,UAAU,CAACkB,GAA5B,IAAmCH,eAAe,KAAKf,UAAU,CAACkB,GADpE;AAEA,UAAMC,aAAa,GACjBN,YAAY,KAAKb,UAAU,CAACkB,GAA5B,IAAmCH,eAAe,KAAKf,UAAU,CAACkB,GADpE;;AAGA,QAAID,YAAY,IAAIE,aAApB,EAAmC;AAAA;;AACjC,0BAAAH,OAAO,CAACT,OAAR,sEAAiBa,IAAjB;AACD;AACF,GATQ,EASN,CAACP,YAAD,EAAeE,eAAf,CATM,CAAT;AAWA;AACA,sBACE,uDAEE,oBAAC,QAAD;AAAU,IAAA,KAAK,EAAEM,MAAM,CAACC,SAAxB;AAAmC,IAAA,GAAG,EAAEN;AAAxC,kBACE,0CACGF,eAAe,iBACd,oBAAC,KAAD;AAAO,IAAA,KAAK,EAAEO,MAAM,CAACb,UAArB;AAAiC,IAAA,MAAM,EAAEA;AAAzC,IAFJ,eAIE,oBAAC,SAAD;AACE,IAAA,KAAK,EAAEG,KADT;AAEE,IAAA,QAAQ,EAAEC,QAFZ;AAGE,IAAA,YAAY,EAAEC;AAHhB,IAJF,CADF,eAWE,0CACGC,eAAe,iBACd,oBAAC,KAAD;AAAO,IAAA,KAAK,EAAEO,MAAM,CAACb,UAArB;AAAiC,IAAA,MAAM,EAAEA;AAAzC,IAFJ,eAIE,oBAAC,QAAD;AAAU,IAAA,KAAK,EAAEG,KAAjB;AAAwB,IAAA,QAAQ,EAAEC;AAAlC,IAJF,CAXF,CAFF,CADF;AAuBD,CAxCD;;AA0CA,MAAMS,MAAM,GAAGvB,UAAU,CAACyB,MAAX,CAAkB;AAC/BD,EAAAA,SAAS,EAAE;AACTE,IAAAA,KAAK,EAAE,MADE;AAETC,IAAAA,MAAM,EAAE,GAFC;AAGTC,IAAAA,eAAe,EAAE,EAHR;AAITC,IAAAA,YAAY,EAAE;AAJL,GADoB;AAO/BnB,EAAAA,UAAU,EAAE;AACVoB,IAAAA,QAAQ,EAAE,UADA;AAEVJ,IAAAA,KAAK,EAAE,MAFG;AAGVC,IAAAA,MAAM,EAAE,MAHE;AAIVE,IAAAA,YAAY,EAAE;AAJJ;AAPmB,CAAlB,CAAf;AAeA,eAAejB,IAAf","sourcesContent":["import React, { useContext, useEffect, useRef } from 'react'\nimport { Image, StyleSheet } from 'react-native'\nimport FlipCard from 'react-native-card-flip'\nimport { CardFields, FormModel } from '../../types'\nimport LibraryContext from '../../LibraryContext'\n\nimport BackSide from './BackSide'\nimport FrontSide from './FrontSide'\n\ntype Props = {\n  focusedField: CardFields | null\n  cardType?: string\n  model: FormModel\n}\n\nfunction usePrevious(value: any) {\n  const ref = useRef()\n  useEffect(() => {\n    ref.current = value\n  })\n  return ref.current\n}\n\nconst background = require('../../assets/background.png')\n\nconst Card: React.FC<Props> = ({ model, cardType, focusedField }) => {\n  const { backgroundImage } = useContext(LibraryContext)\n  const previousFocused = usePrevious(focusedField)\n  const cardRef = useRef<FlipCard>()\n\n  useEffect(() => {\n    const switchToBack =\n      focusedField === CardFields.CVV && previousFocused !== CardFields.CVV\n    const switchToFront =\n      focusedField !== CardFields.CVV && previousFocused === CardFields.CVV\n\n    if (switchToBack || switchToFront) {\n      cardRef.current?.flip()\n    }\n  }, [focusedField, previousFocused])\n\n  debugger;\n  return (\n    <>\n      {/* @ts-ignore */}\n      <FlipCard style={styles.container} ref={cardRef}>\n        <>\n          {backgroundImage || (\n            <Image style={styles.background} source={background} />\n          )}\n          <FrontSide\n            model={model}\n            cardType={cardType}\n            focusedField={focusedField}\n          />\n        </>\n        <>\n          {backgroundImage || (\n            <Image style={styles.background} source={background} />\n          )}\n          <BackSide model={model} cardType={cardType} />\n        </>\n      </FlipCard>\n    </>\n  )\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    width: '100%',\n    height: 200,\n    paddingVertical: 24,\n    borderRadius: 12,\n  },\n  background: {\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    borderRadius: 12,\n  },\n})\n\nexport default Card\n"]}